chrome.runtime.onInstalled.addListener(() => {
    console.log("Incognito Data Eraser installed.");
});

chrome.tabs.onRemoved.addListener((tabId, removeInfo) => {
    chrome.tabs.get(tabId, (tab) => {
        if (tab.incognito) {
            chrome.browsingData.remove({
                "since": new Date().getTime() - 1000 * 60 * 60 // 1 hour
            }, {
                "cache": true,
                "cookies": true,
                "history": true,
                "localStorage": true,
                "sessions": true
            }, () => {
                console.log("Incognito data erased.");
            });
        }
    });
});
